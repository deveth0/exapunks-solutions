; VALUE DISCOVERY
MODE
MAKE
MARK LOOP
COPY M X
TEST X = -1
TJMP END
COPY X F
MODE
REPL VALUE_DISCOVERY
COPY M F
MODE
JUMP LOOP

MARK VALUE_DISCOVERY
LINK 800
REPL VALUES_N3
REPL VALUES_P1
REPL VALUES_P3
JUMP VALUES_MATCHER

MARK VALUES_N3
LINK -3
REPL VALUES_N3
REPL VALUES_N1
REPL VALUES_P1
JUMP VALUES_MATCHER

MARK VALUES_N1
LINK -1
REPL VALUES_N3
REPL VALUES_N1
REPL VALUES_P3
JUMP VALUES_MATCHER

MARK VALUES_P1
LINK 1
REPL VALUES_N3
REPL VALUES_P1
REPL VALUES_P3
JUMP VALUES_MATCHER

MARK VALUES_P3
LINK 3
REPL VALUES_N1
REPL VALUES_P1
REPL VALUES_P3
JUMP VALUES_MATCHER

MARK VALUES_MATCHER
HOST T
TEST X = T
FJMP VALUES_MISMATCH
COPY #NERV M
MARK VALUES_MISMATCH
HALT

MARK END
